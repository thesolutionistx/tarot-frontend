(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[477],{9477:function(e,t,n){"use strict";n.r(t);var r=n(7568),a=n(4924),o=n(6042),i=n(9396),s=n(7582),c=n(5893),u=n(7294),l=n(6064),d=n(7704),p=n(1417),f=n(1664),m=n.n(f),g=n(1163);t.default=(0,l.$j)((function(e){return{auth:e.auth}}),{register:d.z2})((function(e){var t=e.register,n=e.auth,l=(0,u.useState)({username:"",email:"",password:"",password2:""}),d=l[0],f=l[1],h=(0,u.useState)(null),y=h[0],b=h[1],w=(0,u.useState)(!1),x=w[0],E=w[1],N=(0,g.useRouter)(),v=n.isAuthenticated;u.useEffect((function(){v&&N.push("/dashboard")}),[v,N]);var k=d.username,R=d.email,j=d.password,S=d.password2,O=function(e){f((0,i.Z)((0,o.Z)({},d),(0,a.Z)({},e.target.name,e.target.value)))},_=function(){var e=(0,r.Z)((function(e){var n,r,a;return(0,s.__generator)(this,(function(o){switch(o.label){case 0:if(e.preventDefault(),b(null),j!==S)return b("Passwords do not match"),[2];E(!0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,t({username:k,email:R,password:j})];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),b((null===(r=n.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Registration failed. Please try again."),[3,5];case 4:return E(!1),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,c.jsx)("div",{className:"min-h-screen bg-primary-dark py-12 px-4 sm:px-6 lg:px-8 flex flex-col justify-center",children:(0,c.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,c.jsxs)(p.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-8",children:[(0,c.jsx)("h1",{className:"text-4xl font-cinzel text-accent-gold mb-4",children:"Create Account"}),(0,c.jsx)("p",{className:"text-white/80",children:"Begin your spiritual journey with Psychic Tarot Andrew"})]}),y&&(0,c.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-red-900/50 border border-red-500 text-white px-4 py-3 rounded mb-6",children:y}),(0,c.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"bg-primary-medium rounded-xl shadow-2xl p-6 sm:p-8",children:(0,c.jsxs)("form",{onSubmit:_,children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"username",className:"block text-white/80 mb-2",children:"Username"}),(0,c.jsx)("input",{type:"text",id:"username",name:"username",value:k,onChange:O,required:!0,className:"w-full bg-primary-dark border border-white/20 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-accent-gold/50"})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"email",className:"block text-white/80 mb-2",children:"Email"}),(0,c.jsx)("input",{type:"email",id:"email",name:"email",value:R,onChange:O,required:!0,className:"w-full bg-primary-dark border border-white/20 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-accent-gold/50"})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"password",className:"block text-white/80 mb-2",children:"Password"}),(0,c.jsx)("input",{type:"password",id:"password",name:"password",value:j,onChange:O,required:!0,minLength:"6",className:"w-full bg-primary-dark border border-white/20 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-accent-gold/50"})]}),(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("label",{htmlFor:"password2",className:"block text-white/80 mb-2",children:"Confirm Password"}),(0,c.jsx)("input",{type:"password",id:"password2",name:"password2",value:S,onChange:O,required:!0,minLength:"6",className:"w-full bg-primary-dark border border-white/20 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-accent-gold/50"})]}),(0,c.jsx)("button",{type:"submit",disabled:x,className:"btn-primary w-full py-3",children:x?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,c.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,c.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})]})}),(0,c.jsxs)(p.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"text-center mt-6",children:[(0,c.jsxs)("p",{className:"text-white/60",children:["Already have an account?"," ",(0,c.jsx)(m(),{href:"/login",className:"text-accent-gold hover:text-accent-gold/80",children:"Sign In"})]}),(0,c.jsx)(m(),{href:"/",className:"text-accent-gold hover:text-accent-gold/80 mt-2 inline-block",children:"\u2190 Back to Home"})]})]})})}))},7704:function(e,t,n){"use strict";n.d(t,{x4:function(){return d},z2:function(){return l}});var r=n(7568),a=n(7582),o=n(9218),i=n(5559),s=n(7066),c=function(e){e?s.Z.defaults.headers.common.Authorization="Bearer ".concat(e):delete s.Z.defaults.headers.common.Authorization},u=function(){return function(){var e=(0,r.Z)((function(e){var t,n,r;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:(t=localStorage.getItem("token"))&&c(t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.kv.getCurrentUser()];case 2:return n=a.sent(),e({type:o.Cy,payload:n.data.user}),[3,4];case 3:if(a.sent(),localStorage.getItem("token")&&localStorage.getItem("user"))try{return r=JSON.parse(localStorage.getItem("user")),e({type:o.Cy,payload:r}),[2]}catch(s){console.error("Error parsing stored user:",s)}return e({type:o.Ny}),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()},l=function(e){return function(){var t=(0,r.Z)((function(t){var n,r,s,c;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,i.kv.register(e)];case 1:return n=a.sent(),t({type:o.bp,payload:n.data}),t(u()),[3,3];case 2:return r=a.sent(),console.warn("Registration API failed, using mock data:",r),s={id:"mock-user-"+Date.now(),username:e.username,email:e.email,tokenBalance:50},c={token:"mock-token-"+Date.now(),user:s},localStorage.setItem("token",c.token),localStorage.setItem("user",JSON.stringify(s)),t({type:o.bp,payload:c}),t({type:o.Cy,payload:s}),[3,3];case 3:return[2]}}))}));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=(0,r.Z)((function(t){var n,r,s,c;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,i.kv.login(e)];case 1:return n=a.sent(),t({type:o.XP,payload:n.data}),t(u()),[3,3];case 2:return r=a.sent(),console.warn("Login API failed, using mock data:",r),s={id:"mock-user-123",username:e.email.split("@")[0],email:e.email,tokenBalance:75},c={token:"mock-token-"+Date.now(),user:s},localStorage.setItem("token",c.token),localStorage.setItem("user",JSON.stringify(s)),t({type:o.XP,payload:c}),t({type:o.Cy,payload:s}),[3,3];case 3:return[2]}}))}));return function(e){return t.apply(this,arguments)}}()}},9218:function(e,t,n){"use strict";n.d(t,{$i:function(){return k},A8:function(){return x},Ai:function(){return g},Cy:function(){return o},LY:function(){return h},M7:function(){return p},Ms:function(){return d},Nv:function(){return u},Ny:function(){return i},Qj:function(){return c},S4:function(){return R},TS:function(){return N},VK:function(){return w},XP:function(){return s},YY:function(){return a},Zt:function(){return S},bp:function(){return r},cS:function(){return b},e0:function(){return m},ek:function(){return y},h6:function(){return f},pp:function(){return l},qY:function(){return j},ud:function(){return E},y2:function(){return v}});var r="REGISTER_SUCCESS",a="REGISTER_FAIL",o="USER_LOADED",i="AUTH_ERROR",s="LOGIN_SUCCESS",c="LOGIN_FAIL",u="LOGOUT",l="CLEAR_ERRORS",d="GET_READING_TYPES",p="READING_TYPES_ERROR",f="GENERATE_READING",m="READING_ERROR",g="GET_READINGS",h="GET_READING",y="CLEAR_READING",b="SET_LOADING",w="GET_TOKEN_PACKAGES",x="TOKEN_PACKAGES_ERROR",E="CREATE_PAYMENT_INTENT",N="PAYMENT_INTENT_ERROR",v="CONFIRM_PURCHASE",k="PURCHASE_ERROR",R="GET_TRANSACTIONS",j="TRANSACTIONS_ERROR",S="UPDATE_TOKEN_BALANCE"},5559:function(e,t,n){"use strict";n.d(t,{_u:function(){return s},bP:function(){return c},kv:function(){return i}});var r=n(7066),a=n(3454),o=r.Z.create({baseURL:a.env.NEXT_PUBLIC_API_URL||"https://api.askpsychicdrew.com/api",headers:{"Content-Type":"application/json"}});o.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return e.response&&401===e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname.includes("/login")||(window.location.href="/login")),Promise.reject(e)}));var i={register:function(e){return o.post("/auth/register",e)},login:function(e){return o.post("/auth/login",e)},getCurrentUser:function(){return o.get("/auth/me")}},s={getTokenPackages:function(){return o.get("/tokens/packages")},createPaymentIntent:function(e){return o.post("/tokens/payment-intent",{packageId:e})},confirmPurchase:function(e,t){return o.post("/tokens/confirm-purchase",{transactionId:e,paymentIntentId:t})},getUserTransactions:function(){return o.get("/tokens/transactions")}},c={getReadingTypes:function(){return o.get("/readings/types")},generateReading:function(e){return o.post("/readings/generate",e)},getUserReadings:function(){return o.get("/readings")},getReadingById:function(e){return o.get("/readings/".concat(e))}}},1163:function(e,t,n){e.exports=n(387)},4924:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},6042:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4924);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){(0,r.Z)(e,t,n[t])}))}return e}},9396:function(e,t,n){"use strict";function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}n.d(t,{Z:function(){return r}})}}]);