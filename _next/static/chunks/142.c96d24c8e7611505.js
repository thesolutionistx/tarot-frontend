(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[142],{4142:function(e,t,n){"use strict";n.r(t);var r=n(7568),a=n(4924),o=n(6042),i=n(9396),c=n(7582),s=n(5893),u=n(7294),l=n(6064),d=n(7704),f=n(1417),p=n(1664),m=n.n(p),g=n(1163);t.default=(0,l.$j)((function(e){return{auth:e.auth}}),{login:d.x4})((function(e){var t=e.login,n=e.auth,l=(0,u.useState)({email:"",password:""}),d=l[0],p=l[1],y=(0,u.useState)(null),h=y[0],b=y[1],E=(0,u.useState)(!1),x=E[0],N=E[1],R=(0,g.useRouter)(),w=n.isAuthenticated;u.useEffect((function(){w&&R.push("/dashboard")}),[w,R]);var k=d.email,v=d.password,S=function(e){p((0,i.Z)((0,o.Z)({},d),(0,a.Z)({},e.target.name,e.target.value)))},O=function(){var e=(0,r.Z)((function(e){var n,r,a;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:e.preventDefault(),b(null),N(!0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,t(d)];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),b((null===(r=n.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Login failed. Please try again."),[3,5];case 4:return N(!1),[7];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,s.jsx)("div",{className:"min-h-screen bg-primary-dark py-12 px-4 sm:px-6 lg:px-8 flex flex-col justify-center",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsxs)(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-cinzel text-accent-gold mb-4",children:"Welcome Back"}),(0,s.jsx)("p",{className:"text-white/80",children:"Sign in to continue your spiritual journey"})]}),h&&(0,s.jsx)(f.E.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-red-900/50 border border-red-500 text-white px-4 py-3 rounded mb-6",children:h}),(0,s.jsx)(f.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"bg-primary-medium rounded-xl shadow-2xl p-6 sm:p-8",children:(0,s.jsxs)("form",{onSubmit:O,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-white/80 mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:k,onChange:S,required:!0,className:"w-full bg-primary-dark border border-white/20 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-accent-gold/50"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-white/80 mb-2",children:"Password"}),(0,s.jsx)("input",{type:"password",id:"password",name:"password",value:v,onChange:S,required:!0,className:"w-full bg-primary-dark border border-white/20 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-accent-gold/50"})]}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"btn-primary w-full py-3",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing In..."]}):"Sign In"})]})}),(0,s.jsxs)(f.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"text-center mt-6",children:[(0,s.jsxs)("p",{className:"text-white/60",children:["Don't have an account?"," ",(0,s.jsx)(m(),{href:"/register",className:"text-accent-gold hover:text-accent-gold/80",children:"Register"})]}),(0,s.jsx)(m(),{href:"/",className:"text-accent-gold hover:text-accent-gold/80 mt-2 inline-block",children:"\u2190 Back to Home"})]})]})})}))},7704:function(e,t,n){"use strict";n.d(t,{x4:function(){return d},z2:function(){return l}});var r=n(7568),a=n(7582),o=n(9218),i=n(5559),c=n(7066),s=function(e){e?c.Z.defaults.headers.common.Authorization="Bearer ".concat(e):delete c.Z.defaults.headers.common.Authorization},u=function(){return function(){var e=(0,r.Z)((function(e){var t,n,r;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:(t=localStorage.getItem("token"))&&s(t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,i.kv.getCurrentUser()];case 2:return n=a.sent(),e({type:o.Cy,payload:n.data.user}),[3,4];case 3:if(a.sent(),localStorage.getItem("token")&&localStorage.getItem("user"))try{return r=JSON.parse(localStorage.getItem("user")),e({type:o.Cy,payload:r}),[2]}catch(c){console.error("Error parsing stored user:",c)}return e({type:o.Ny}),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()},l=function(e){return function(){var t=(0,r.Z)((function(t){var n,r,c,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,i.kv.register(e)];case 1:return n=a.sent(),t({type:o.bp,payload:n.data}),t(u()),[3,3];case 2:return r=a.sent(),console.warn("Registration API failed, using mock data:",r),c={id:"mock-user-"+Date.now(),username:e.username,email:e.email,tokenBalance:50},s={token:"mock-token-"+Date.now(),user:c},localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify(c)),t({type:o.bp,payload:s}),t({type:o.Cy,payload:c}),[3,3];case 3:return[2]}}))}));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var t=(0,r.Z)((function(t){var n,r,c,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,i.kv.login(e)];case 1:return n=a.sent(),t({type:o.XP,payload:n.data}),t(u()),[3,3];case 2:return r=a.sent(),console.warn("Login API failed, using mock data:",r),c={id:"mock-user-123",username:e.email.split("@")[0],email:e.email,tokenBalance:75},s={token:"mock-token-"+Date.now(),user:c},localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify(c)),t({type:o.XP,payload:s}),t({type:o.Cy,payload:c}),[3,3];case 3:return[2]}}))}));return function(e){return t.apply(this,arguments)}}()}},9218:function(e,t,n){"use strict";n.d(t,{$i:function(){return k},A8:function(){return x},Ai:function(){return g},Cy:function(){return o},LY:function(){return y},M7:function(){return f},Ms:function(){return d},Nv:function(){return u},Ny:function(){return i},Qj:function(){return s},S4:function(){return v},TS:function(){return R},VK:function(){return E},XP:function(){return c},YY:function(){return a},Zt:function(){return O},bp:function(){return r},cS:function(){return b},e0:function(){return m},ek:function(){return h},h6:function(){return p},pp:function(){return l},qY:function(){return S},ud:function(){return N},y2:function(){return w}});var r="REGISTER_SUCCESS",a="REGISTER_FAIL",o="USER_LOADED",i="AUTH_ERROR",c="LOGIN_SUCCESS",s="LOGIN_FAIL",u="LOGOUT",l="CLEAR_ERRORS",d="GET_READING_TYPES",f="READING_TYPES_ERROR",p="GENERATE_READING",m="READING_ERROR",g="GET_READINGS",y="GET_READING",h="CLEAR_READING",b="SET_LOADING",E="GET_TOKEN_PACKAGES",x="TOKEN_PACKAGES_ERROR",N="CREATE_PAYMENT_INTENT",R="PAYMENT_INTENT_ERROR",w="CONFIRM_PURCHASE",k="PURCHASE_ERROR",v="GET_TRANSACTIONS",S="TRANSACTIONS_ERROR",O="UPDATE_TOKEN_BALANCE"},5559:function(e,t,n){"use strict";n.d(t,{_u:function(){return c},bP:function(){return s},kv:function(){return i}});var r=n(7066),a=n(3454),o=r.Z.create({baseURL:a.env.NEXT_PUBLIC_API_URL||"https://api.askpsychicdrew.com/api",headers:{"Content-Type":"application/json"}});o.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),o.interceptors.response.use((function(e){return e}),(function(e){return e.response&&401===e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname.includes("/login")||(window.location.href="/login")),Promise.reject(e)}));var i={register:function(e){return o.post("/auth/register",e)},login:function(e){return o.post("/auth/login",e)},getCurrentUser:function(){return o.get("/auth/me")}},c={getTokenPackages:function(){return o.get("/tokens/packages")},createPaymentIntent:function(e){return o.post("/tokens/payment-intent",{packageId:e})},confirmPurchase:function(e,t){return o.post("/tokens/confirm-purchase",{transactionId:e,paymentIntentId:t})},getUserTransactions:function(){return o.get("/tokens/transactions")}},s={getReadingTypes:function(){return o.get("/readings/types")},generateReading:function(e){return o.post("/readings/generate",e)},getUserReadings:function(){return o.get("/readings")},getReadingById:function(e){return o.get("/readings/".concat(e))}}},1163:function(e,t,n){e.exports=n(387)},4924:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},6042:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(4924);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){(0,r.Z)(e,t,n[t])}))}return e}},9396:function(e,t,n){"use strict";function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}n.d(t,{Z:function(){return r}})}}]);